<!DOCTYPE html>
<html lang="en" style="font-family: monospace;"><head><title>[32f35a3ae3] allow draging &amp; r-clicking in more places | shark | Boast</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"></head><body><strong><a href="../../">Repos</a> / <a href="../">shark</a> / 32f35a3ae3</strong><hr><pre>commit 32f35a3ae384fa25ff9c66b068427c6333fe85e4
Author: Nh√¢n &lt;hi@imnhan.com&gt;
Date:   Sun Sep 17 15:27:14 2023 +0700

    allow draging &amp; r-clicking in more places
    
    Makes things feel more responsive.

diff --git a/states.go b/states.go
index d886778..cffc86f 100644
--- a/states.go
+++ b/states.go
@@ -135,7 +135,16 @@ type StateRClick struct{
 func (s *StateRClick) Enter(sm *StateMachine) {
 	sm.SetAnim(RightClick)
 }
-func (s *StateRClick) Update(sm *StateMachine) {}
+func (s *StateRClick) Update(sm *StateMachine) {
+	if inpututil.IsMouseButtonJustPressed(ebiten.MouseButtonLeft) {
+		sm.SetState(&amp;StateDrag{})
+		return
+	}
+	if inpututil.IsMouseButtonJustPressed(ebiten.MouseButtonRight) {
+		sm.SetState(&amp;StateRClick{})
+		return
+	}
+}
 func (s *StateRClick) EndAnimHook(sm *StateMachine) {
 	sm.SetState(&amp;StateIdle{})
 }
@@ -161,8 +170,17 @@ func (s *StateFeed) EndAnimHook(sm *StateMachine) {
 
 type StateWalkL struct{}
 
-func (s *StateWalkL) Enter(sm *StateMachine)  { sm.SetAnim(WalkLeft) }
-func (s *StateWalkL) Update(sm *StateMachine) {}
+func (s *StateWalkL) Enter(sm *StateMachine) { sm.SetAnim(WalkLeft) }
+func (s *StateWalkL) Update(sm *StateMachine) {
+	if inpututil.IsMouseButtonJustPressed(ebiten.MouseButtonLeft) {
+		sm.SetState(&amp;StateDrag{})
+		return
+	}
+	if inpututil.IsMouseButtonJustPressed(ebiten.MouseButtonRight) {
+		sm.SetState(&amp;StateRClick{})
+		return
+	}
+}
 func (s *StateWalkL) EndAnimHook(sm *StateMachine) {
 	if randBool(StopChance) {
 		sm.SetState(&amp;StateIdle{})
@@ -171,8 +189,17 @@ func (s *StateWalkL) EndAnimHook(sm *StateMachine) {
 
 type StateWalkR struct{}
 
-func (s *StateWalkR) Enter(sm *StateMachine)  { sm.SetAnim(WalkRight) }
-func (s *StateWalkR) Update(sm *StateMachine) {}
+func (s *StateWalkR) Enter(sm *StateMachine) { sm.SetAnim(WalkRight) }
+func (s *StateWalkR) Update(sm *StateMachine) {
+	if inpututil.IsMouseButtonJustPressed(ebiten.MouseButtonLeft) {
+		sm.SetState(&amp;StateDrag{})
+		return
+	}
+	if inpututil.IsMouseButtonJustPressed(ebiten.MouseButtonRight) {
+		sm.SetState(&amp;StateRClick{})
+		return
+	}
+}
 func (s *StateWalkR) EndAnimHook(sm *StateMachine) {
 	if randBool(StopChance) {
 		sm.SetState(&amp;StateIdle{})
</pre></body></html>