<!DOCTYPE html>
<html lang="en" style="font-family: monospace;"><head><title>[0598a036b0] update CI builds to go 1.21 | shark | Boast</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"></head><body><strong><a href="../../">Repos</a> / <a href="../">shark</a> / 0598a036b0</strong><hr><pre>commit 0598a036b06cafd4e7b0166fdb39fc7b2ad629a4
Author: Nh√¢n &lt;hi@imnhan.com&gt;
Date:   Sun Sep 17 14:23:05 2023 +0700

    update CI builds to go 1.21

diff --git a/.builds/debian.yml b/.builds/debian.yml
index 612220f..4b900a1 100644
--- a/.builds/debian.yml
+++ b/.builds/debian.yml
@@ -1,7 +1,8 @@
-image: debian/bullseye
+# Use oldest available OS so we get oldest possible glibc,
+# therefore maximizing compatibility.
+image: debian/oldstable
 
 packages:
-  - golang-1.19
   # The following copied as-is from https://ebiten.org/documents/install.html
   - libc6-dev
   - libglu1-mesa-dev
@@ -14,13 +15,12 @@ packages:
   - libasound2-dev
   - pkg-config
 
-repositories:
-  backports: http://deb.debian.org/debian bullseye-backports main
-
 tasks:
   - build: |
+      curl -L &#39;https://go.dev/dl/go1.21.1.linux-amd64.tar.gz&#39; &gt; go.tar.gz
+      tar -xf go.tar.gz
+      export PATH=&quot;$PATH:$PWD/go/bin&quot;
       cd shark
-      export PATH=&quot;$PATH:/usr/lib/go-1.19/bin&quot;
       go version
       make linux
       make windows
diff --git a/.github/workflows/main.yml b/.github/workflows/main.yml
index b073071..858dbb7 100644
--- a/.github/workflows/main.yml
+++ b/.github/workflows/main.yml
@@ -6,13 +6,13 @@ on:
 jobs:
 
   build-linux:
-    runs-on: ubuntu-latest
+    runs-on: ubuntu-20.04 # oldest possible OS
 
     steps:
     - uses: actions/checkout@v3
     - uses: actions/setup-go@v3
       with:
-        go-version: 1.19
+        go-version: 1.21
 
     - name: Install ebiten linux deps
       run: make deps-debian
@@ -62,7 +62,7 @@ jobs:
     - uses: actions/checkout@v3
     - uses: actions/setup-go@v3
       with:
-        go-version: 1.19
+        go-version: 1.21
 
     - name: Install ebiten linux deps
       run: make deps-debian
@@ -99,13 +99,13 @@ jobs:
         fi
 
   build-macos:
-    runs-on: macos-10.15
+    runs-on: macos-latest
 
     steps:
     - uses: actions/checkout@v3
     - uses: actions/setup-go@v3
       with:
-        go-version: 1.19
+        go-version: 1.21
 
     - name: Build for macOS
       env:
</pre></body></html>