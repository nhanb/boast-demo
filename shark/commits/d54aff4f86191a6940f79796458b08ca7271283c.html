<!DOCTYPE html>
<html lang="en" style="font-family: monospace;"><head><title>[d54aff4f86] write makefile; build everything into dist/ | shark | Boast</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"></head><body><strong><a href="../../">Repos</a> / <a href="../">shark</a> / d54aff4f86</strong><hr><pre>commit d54aff4f86191a6940f79796458b08ca7271283c
Author: Bùi Thành Nhân &lt;hi@imnhan.com&gt;
Date:   Thu Jun 30 18:31:26 2022 +0700

    write makefile; build everything into dist/

diff --git a/.builds/debian.yml b/.builds/debian.yml
index e8d4f65..18131e6 100644
--- a/.builds/debian.yml
+++ b/.builds/debian.yml
@@ -22,9 +22,9 @@ tasks:
       cd shark
       export PATH=&quot;$PATH:/usr/lib/go-1.18/bin&quot;
       go version
-      go build -o shark-linux
-      GOOS=windows GOARCH=amd64 go build -o shark-win.exe
+      make linux
+      make win
 
 artifacts:
-  - shark/shark-linux
-  - shark/shark-win.exe
+  - shark/dist/shark-linux
+  - shark/dist/shark-win.exe
diff --git a/.github/workflows/main.yml b/.github/workflows/main.yml
index f498e6d..7b54063 100644
--- a/.github/workflows/main.yml
+++ b/.github/workflows/main.yml
@@ -1,39 +1,34 @@
-name: Go package
+name: Build
 
 on: [push]
 
 jobs:
   build:
-
     runs-on: [&#39;ubuntu-latest&#39;, &#39;windows-latest&#39;, &#39;macos-latest&#39;]
     steps:
       - uses: actions/checkout@v3
-
       - name: Set up Go
         uses: actions/setup-go@v3
         with:
           go-version: 1.18
-
       - name: Build
         run: go build -v ./...
-
       - name: Upload linux
-        if: runner.os == &#39;Linux&#39;
+        #if: runner.os == &#39;Linux&#39;
         uses: actions/upload-artifact@v3
         with:
           name: shark-linux
           path: shark
-
-      - name: Upload macOS
-        if: runner.os == &#39;macOS&#39;
-        uses: actions/upload-artifact@v3
-        with:
-          name: shark-osx
-          path: shark
-
-      - name: Upload Windows
-        if: runner.os == &#39;Windows&#39;
-        uses: actions/upload-artifact@v3
-        with:
-          name: shark-win.exe
-          path: shark.exe
+      #- name: Upload macOS
+        #if: runner.os == &#39;macOS&#39;
+        #uses: actions/upload-artifact@v3
+        #with:
+          #name: shark-osx
+          #path: shark
+
+      #- name: Upload Windows
+        #if: runner.os == &#39;Windows&#39;
+        #uses: actions/upload-artifact@v3
+        #with:
+          #name: shark-win.exe
+          #path: shark.exe
diff --git a/.gitignore b/.gitignore
index 1880ce9..9b1c8b1 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,2 +1 @@
-/shark
-/shark.exe
+/dist
diff --git a/Makefile b/Makefile
new file mode 100644
index 0000000..f32a4b2
--- /dev/null
+++ b/Makefile
@@ -0,0 +1,14 @@
+# All builds use the `ebitensinglethread` tag to shave off some CPU usage.
+# Details here: https://github.com/hajimehoshi/ebiten/issues/1367
+
+build:
+	go build -tags ebitensinglethread -o dist/shark
+
+linux:
+	GOOS=linux GOARCH=amd64 go build -tags ebitensinglethread -o dist/shark-linux
+
+win:
+	GOOS=windows GOARCH=amd64 go build -tags ebitensinglethread -o dist/shark-win.exe
+
+clean:
+	rm -f dist/*
</pre></body></html>