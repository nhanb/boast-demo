<!DOCTYPE html>
<html lang="en" style="font-family: monospace;"><head><title>[acaa40ad98] print tcl stderr too | gorts | Boast</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"></head><body><strong><a href="../../">Repos</a> / <a href="../">gorts</a> / acaa40ad98</strong><hr><pre>commit acaa40ad9850ffbc62fd89974950ef29faa22af1
Author: Nh√¢n &lt;hi@imnhan.com&gt;
Date:   Mon Jun 19 14:48:52 2023 +0700

    print tcl stderr too

diff --git a/main.go b/main.go
index 63470a8..b03bf9d 100644
--- a/main.go
+++ b/main.go
@@ -59,11 +59,24 @@ func startGUI() {
 		panic(err)
 	}
 
+	stderr, err := cmd.StderrPipe()
+	if err != nil {
+		panic(err)
+	}
+
 	err = cmd.Start()
 	if err != nil {
 		panic(err)
 	}
 
+	go func() {
+		errscanner := bufio.NewScanner(stderr)
+		for errscanner.Scan() {
+			errtext := errscanner.Text()
+			fmt.Printf(&quot;~~&gt; %s\n&quot;, errtext)
+		}
+	}()
+
 	fmt.Fprintln(stdin, mainTcl)
 	println(&quot;Loaded main tcl script.&quot;)
 
@@ -81,18 +94,18 @@ func startGUI() {
 	next := func() string {
 		scanner.Scan()
 		v := scanner.Text()
-		println(&quot;=&gt;&quot;, v)
+		println(&quot;==&gt;&quot;, v)
 		return v
 	}
 
 	respond := func(s string) {
-		println(&quot;&lt;=&quot;, s)
+		println(&quot;&lt;==&quot;, s)
 		io.WriteString(stdin, s+&quot;\n&quot;)
 	}
 
 	for scanner.Scan() {
 		req := scanner.Text()
-		println(&quot;=&gt; &quot; + req)
+		println(&quot;==&gt; &quot; + req)
 		switch req {
 		case &quot;readstate&quot;:
 			// TODO: there must be a more... civilized way.
</pre></body></html>