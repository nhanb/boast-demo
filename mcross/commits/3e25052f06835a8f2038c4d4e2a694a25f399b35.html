<!DOCTYPE html>
<html lang="en" style="font-family: monospace;"><head><title>[3e25052f06] Add CLI arguments to pick custom fonts | mcross | Boast</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"></head><body><strong><a href="../../">Repos</a> / <a href="../">mcross</a> / 3e25052f06</strong><hr><pre>commit 3e25052f06835a8f2038c4d4e2a694a25f399b35
Author: Frederick Yin &lt;fkfd@macaw.me&gt;
Date:   Sun May 31 14:52:03 2020 +0800

    Add CLI arguments to pick custom fonts
    
    Users can now pick custom fonts via args `--textfont` and `--monofont`.
    This is a WIP patch. Todos:
    - Add more font candidates to the &quot;default&quot; font lists
    - Add help text for arguments
    - Perhaps a config file

diff --git a/src/mcross/gui/controller.py b/src/mcross/gui/controller.py
index 3c90421..0a8fa8a 100644
--- a/src/mcross/gui/controller.py
+++ b/src/mcross/gui/controller.py
@@ -2,6 +2,7 @@
 import threading
 import time
 import traceback
+import argparse
 from ssl import SSLCertVerificationError
 from tkinter import READABLE, Tk, messagebox
 
@@ -19,13 +20,21 @@
 
 statusbar_logger = logging.getLogger(&quot;statusbar&quot;)
 
+argparser = argparse.ArgumentParser()
+argparser.add_argument(&quot;--textfont&quot;)
+argparser.add_argument(&quot;--monofont&quot;)
+args = argparser.parse_args()
 
 class Controller:
     def __init__(self):
         self.root = Tk()
         self.root.alt_shortcuts = set()
         self.model = Model()
-        self.view = View(self.root, self.model)
+        self.view = View(
+            self.root,
+            self.model,
+            fonts=(args.textfont, args.monofont)
+        )
         self.root.title(&quot;McRoss Browser&quot;)
         self.root.geometry(&quot;800x600&quot;)
 
diff --git a/src/mcross/gui/view.py b/src/mcross/gui/view.py
index 0bc57da..ddea0bb 100644
--- a/src/mcross/gui/view.py
+++ b/src/mcross/gui/view.py
@@ -71,7 +71,7 @@ class View:
     back_callback = None
     forward_callback = None
 
-    def __init__(self, root: Tk, model: Model):
+    def __init__(self, root: Tk, model: Model, fonts=(None, None)):
         self.model = model
 
         # first row - address bar + buttons
@@ -142,19 +142,34 @@ def on_ctrl_l(ev):
         text = ReadOnlyText(row2, wrap=&quot;word&quot;)
         self.text = text
         self.render_page()
-        text_font = pick_font(
-            [
-                &quot;Charis SIL&quot;,
-                &quot;Source Serif Pro&quot;,
-                &quot;Cambria&quot;,
-                &quot;Georgia&quot;,
-                &quot;DejaVu Serif&quot;,
-                &quot;Times New Roman&quot;,
-                &quot;Times&quot;,
-                &quot;TkTextFont&quot;,
-            ]
-        )
-        mono_font = pick_font([&quot;Ubuntu Mono&quot;, &quot;Consolas&quot;, &quot;Courier&quot;, &quot;TkFixedFont&quot;])
+        if fonts[0] is None:
+            text_font = pick_font(
+                [
+                    &quot;Charis SIL&quot;,
+                    &quot;Source Serif Pro&quot;,
+                    &quot;Cambria&quot;,
+                    &quot;Georgia&quot;,
+                    &quot;DejaVu Serif&quot;,
+                    &quot;Times New Roman&quot;,
+                    &quot;Times&quot;,
+                    &quot;TkTextFont&quot;,
+                ]
+            )
+        else:
+            text_font = fonts[0]
+
+        if fonts[1] is None:
+            mono_font = pick_font(
+                [
+                    &quot;Ubuntu Mono&quot;,
+                    &quot;Consolas&quot;,
+                    &quot;Courier&quot;,
+                    &quot;TkFixedFont&quot;
+                ]
+            )
+        else:
+            mono_font = fonts[1]
+
         text.config(
             font=(text_font, 13),
             bg=&quot;#fff8dc&quot;,
</pre></body></html>