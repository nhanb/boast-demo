<!DOCTYPE html>
<html lang="en" style="font-family: monospace;"><head><title>[161ce7ee4b] simpler, more correct mirror command | pytaku | Boast</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"></head><body><strong><a href="../../">Repos</a> / <a href="../">pytaku</a> / 161ce7ee4b</strong><hr><pre>commit 161ce7ee4bcdafd691e33bb23f00f3411b4d6c3c
Author: Bùi Thành Nhân &lt;hi@imnhan.com&gt;
Date:   Sat Oct 3 10:47:41 2020 +0700

    simpler, more correct mirror command
    
    Old one didn&#39;t push non-master branches.

diff --git a/.builds/ubuntu.yml b/.builds/ubuntu.yml
index 5c39d1c..d792a40 100644
--- a/.builds/ubuntu.yml
+++ b/.builds/ubuntu.yml
@@ -25,12 +25,13 @@ packages:
 
 tasks:
   - mirror-to-github: |
-      cd pytaku
+      git clone --mirror https://git.sr.ht/~nhanb/pytaku mirror
+      cd mirror
       mkdir -p ~/.ssh
       echo -e &quot;\nHost github.com\n  IdentityFile /home/build/.ssh/89816c8b-4416-4a78-84ee-3ad77b485912\n  IdentitiesOnly yes\n  BatchMode yes&quot; &gt;&gt; ~/.ssh/config
       echo &quot;github.com ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAq2A7hRGmdnm9tUDbO9IDSwBK6TbQa+PXYPCPy6rbTrTtw7PHkccKrpp0yVhp5HdEIcKr6pLlVDBfOLX9QUsyCOV0wzfjIJNlGEYsdlLJizHhbn2mUjvSAHQqZETYP81eFzLQNnPHt4EVVUh7VfDESU84KezmD5QlWpXLmvU31/yMf+Se8xhHTvKSCZIFImWwoG6mbUoWf9nzpIoaSjB+weqqUUmpaaasXVal72J+UX2B+2RPW3RcT0eOzQgqlJL3RKrTJvdsjE3JEAvGq3lGHSZXy28G3skua2SmVi/w4yCE6gbODqnTWlg7+wC604ydGXA8VJiS5ap43JXiUFFAaQ==&quot; &gt;&gt; ~/.ssh/known_hosts
       git remote add github git@github.com:nhanb/pytaku.git
-      git push -f github &#39;*:*&#39; --follow-tags
+      git push --mirror github
 
   - setup: |
       python3.7 -m venv ~/venv
</pre></body></html>