<!DOCTYPE html>
<html lang="en" style="font-family: monospace;"><head><title>[990ea70bcf] catch JsonDecodeError in title updater | pytaku | Boast</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"></head><body><strong><a href="../../">Repos</a> / <a href="../">pytaku</a> / 990ea70bcf</strong><hr><pre>commit 990ea70bcf616e1ad7a2922b853db9b32611e66a
Author: Bùi Thành Nhân &lt;hi@imnhan.com&gt;
Date:   Tue Mar 23 21:52:54 2021 +0700

    catch JsonDecodeError in title updater

diff --git a/pyproject.toml b/pyproject.toml
index de0b1f2..27637eb 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -1,6 +1,6 @@
 [tool.poetry]
 name = &quot;pytaku&quot;
-version = &quot;0.4.1&quot;
+version = &quot;0.4.2&quot;
 description = &quot;Self-hostable web-based manga reader&quot;
 authors = [&quot;Bùi Thành Nhân &lt;hi@imnhan.com&gt;&quot;]
 license = &quot;AGPL-3.0-only&quot;
diff --git a/src/pytaku/scheduler.py b/src/pytaku/scheduler.py
index c64cb21..aa24b34 100644
--- a/src/pytaku/scheduler.py
+++ b/src/pytaku/scheduler.py
@@ -2,6 +2,7 @@
 import traceback
 from abc import ABC, abstractmethod
 from datetime import datetime, timedelta
+from json.decoder import JSONDecodeError
 from pathlib import Path
 
 from requests.exceptions import ReadTimeout
@@ -69,8 +70,8 @@ def run(self):
                 updated_title = get_title(title[&quot;site&quot;], title[&quot;id&quot;])
                 save_title(updated_title)
                 print(&quot; done&quot;)
-            except (SourceSite5xxError, ReadTimeout) as e:
-                print(&quot; skipped because of server error:&quot;, str(e))
+            except (SourceSite5xxError, ReadTimeout, JSONDecodeError) as e:
+                print(&quot; skipped because of server error:&quot;, e.__class__.__name__, str(e))
 
 
 class DeleteExpiredTokens(Worker):
</pre></body></html>